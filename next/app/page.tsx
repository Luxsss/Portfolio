"use client";

import { useEffect, useRef } from "react";
import gsap from "gsap";
import { ScrollTrigger } from "gsap/ScrollTrigger";
import Navbar from "@/components/Navbar";
import Header from "@/components/Header";
import AboutMe from "@/components/AboutMe";
import Projects from "@/components/Projects";
import Contact from "@/components/Contact";
import Footer from "@/components/Footer/index"

export default function Home() {
  const svgRefDesktop = useRef<SVGSVGElement | null>(null);
  const pathRefDesktop = useRef<SVGPathElement | null>(null);
  const svgRefMobile = useRef<SVGSVGElement | null>(null);
  const pathRefMobile = useRef<SVGPathElement | null>(null);

  useEffect(() => {
    gsap.registerPlugin(ScrollTrigger);

    const isMobile = window.innerWidth <= 425;
    const svg = isMobile ? svgRefMobile.current : svgRefDesktop.current;
    const path = isMobile ? pathRefMobile.current : pathRefDesktop.current;
    if (!svg || !path) return;

    path.style.willChange = "stroke-dashoffset";

    const pathLength = path.getTotalLength();

    path.style.strokeDasharray = `${pathLength}`;
    path.style.strokeDashoffset = `${pathLength}`;

    gsap.to(path, {
      strokeDashoffset: 0,
      ease: "none",
      scrollTrigger: {
        trigger: svg,
        start: "top",
        end: `+=${svg.clientHeight / 1.1}`,
        scrub: true,
      },
    });
  }, []);

  return (
    <div>
      <Navbar />
      <Header />
      <AboutMe />
      <Projects />
      <Contact />
      <Footer />

      <svg ref={svgRefDesktop} className="olk squiggle first-svg" width="2042" height="16279" viewBox="0 0 2042 16279" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path ref={pathRefDesktop} d="M0.112 23C0.112 23 921.043 455.834 815.051 782.756C709.059 1109.68 -19.3865 960.726 226.595 1291.52C472.577 1622.31 2241.94 1146.43 1880.47 1911.51C1519 2676.59 1504.5 2774.76 1022.54 2555.2C540.572 2335.64 226.595 2443.48 226.595 2854.07C226.595 3264.66 810.051 3077.5 993.538 3399.59C1177.02 3721.67 1697.49 3320.27 1880.47 3586.26C2063.46 3852.25 1726.48 3707.17 1697.49 4295.24C1668.49 4883.31 333.087 3908.35 395.582 4621.68C458.078 5335.01 115.603 4752.25 91.6052 5186.05C67.607 5619.86 159.1 5685.14 458.078 5671.12C757.056 5657.09 1952.47 5391.11 1962.47 6244.68C1972.46 7098.26 1817.98 7546.09 1162.03 7009.76C506.074 6473.43 5.11168 6958.5 202.597 7438.73C400.082 7918.95 1292.52 7677.15 1779.48 8059.2C2266.44 8441.26 1904.97 9043.35 1581.49 9336.91C1258.02 9630.46 897.045 8754.15 458.078 8819.44C19.1108 8884.73 631.565 9747.5 202.597 10059.9C-226.371 10372.3 848.549 10973.9 1152.53 10474.8C1456.5 9975.76 1928.97 10941.5 1837.47 11314.4C1745.98 11687.3 159.1 11235.1 251.093 11762.2C343.087 12289.4 1914.47 12900.2 1875.97 12499.3C1837.47 12098.3 742.556 12434 1075.53 12704.3C1408.51 12974.6 -23.8861 12900.2 226.595 13357.7C477.076 13815.2 1446.01 14399.2 1668.49 14015.4C1890.97 13631.6 2144.75 14649.2 1933.47 14780C1722.18 14910.7 851.684 15545.6 1201.86 15602.5C1552.04 15659.4 953.439 16235.6 684.261 16021.5C415.084 15807.5 -541 16255.5 -541 16255.5" stroke="#CE4242" strokeWidth="50"/>
      </svg>

      <svg ref={svgRefMobile} className="olk squiggle second-svg" width="2149" height="23770" viewBox="0 0 2149 23770" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path ref={pathRefMobile} d="M0 48.6744C13.42 -63.1605 526.905 243.931 331.243 494.416C135.582 744.901 99.6253 1014.71 150.444 1181.93C201.263 1349.15 387.432 1630.87 693.352 1643.65C999.272 1656.43 934 1944.88 271.705 2381.76C-363.865 2885.26 871.702 2814.53 810.588 3118.28C749.474 3422.02 1865.15 3080.79 1883.83 3500.64C1902.5 3920.5 533.128 3586.26 271.705 4157.27C10.2833 4728.29 829.171 4821.42 810.588 5201.06C792.005 5580.7 1151.26 5593.83 1649.86 5322.5C2148.46 5051.17 2150 6364 1824.5 6045C1499 5726 -112.606 6492.37 436.5 6554.5C985.606 6616.63 1217.94 6843.76 1649.86 7035.69C2514.13 7507.69 829.205 7500.07 596.746 7564.51C364.287 7628.95 110.192 7551.34 179.627 7849.42C249.063 8147.5 1199.2 8768.5 1207.08 8269.6C1214.96 7770.7 1743.79 8364.06 1870.24 8506.58C1996.69 8649.1 2090.51 8788.57 1923.5 8926.5C1756.49 9064.43 1440.11 8878.6 1675.01 9277.7C1909.92 9676.8 306.79 8944.7 580.645 9466.6C854.5 9988.5 245.038 9678 249.063 9939.5C253.089 10201 1018.9 10331.3 1040.03 10104.2C1061.16 9877.11 1540.17 10148.4 1675.01 10462.6C1809.86 10776.8 1246.53 10330.6 1061.16 10542C875.795 10753.3 1040.03 11229 1040.03 11394.1C1040.03 11559.1 893.886 11392.1 580.645 11348C267.404 11303.9 482.172 11836.6 253.089 11843.5C24.0057 11850.4 -258.484 12768.2 979.649 12314.3C2217.78 11860.4 2194.74 12992.1 1520 12785.5C845.264 12578.9 -243.94 13237.5 543 13189C1329.94 13140.5 1118.88 13487.5 500.5 13869.9C-117.882 14252.2 1598.03 13500.8 1760.05 13869.9C1922.07 14238.9 967.07 14127.7 1004.81 14322.5C1042.54 14517.4 1348.31 14249.2 1407.33 14467.4C1466.36 14685.6 748.5 14378.5 748.5 14704C748.5 15029.5 1004.81 14845.5 1095 15079.5C1185.19 15313.5 662.665 15068.8 355.082 15212.2C47.5 15355.5 1010.73 15857.2 1163.77 15610.2C1316.81 15363.2 1852.5 15624.5 1711 16106C1569.5 16587.5 381.5 17145 267 16757.5C152.5 16370 1864.93 16633 1864.93 17008C1864.93 17383 1372.5 17283.5 1651.5 17820.5C1930.5 18357.5 51.0001 17820.5 387.5 18290.5C724 18760.5 -63 18811 229 19090.5C521 19370 1630.5 18903 1300.5 19391.5C970.5 19880 770.5 20006 1520 20361.5C2269.5 20717 197.5 20773.5 159 21021C120.5 21268.5 1321 21376.5 1804 21332C2287 21287.5 1702 22107 572 22164C-558 22221 730.5 22856 1257.5 22595.5C1784.5 22335 1836 23180 997.5 23097.5C159 23015 1397.66 23693.3 2146.5 23745" stroke="#CE4242" strokeWidth="50"/>
      </svg>

    </div>
  );
}
