"use client";

import { useEffect, useRef } from "react";
import gsap from "gsap";
import { ScrollTrigger } from "gsap/ScrollTrigger";
import Navbar from "@/components/Navbar";
import Header from "@/components/Header";
import AboutMe from "@/components/AboutMe";
import Projects from "@/components/Projects";
import Contact from "@/components/Contact";

export default function Home() {
  const svgRef = useRef<SVGSVGElement | null>(null);
  const pathRef = useRef<SVGPathElement | null>(null);

  useEffect(() => {
    gsap.registerPlugin(ScrollTrigger);

    const svg = svgRef.current;
    const path = pathRef.current;
    if (!svg || !path) return;

    // Indique au navigateur que stroke-dashoffset va être animé
    path.style.willChange = "stroke-dashoffset";

    // Récupère la longueur totale du tracé
    const pathLength = path.getTotalLength();

    // Initialisation du tracé
    path.style.strokeDasharray = `${pathLength}`;
    path.style.strokeDashoffset = `${pathLength}`;

    // Animation avec GSAP et ScrollTrigger
    gsap.to(path, {
      strokeDashoffset: 0,
      ease: "none",
      scrollTrigger: {
        trigger: svg,
        start: "top",
        end: `+=${svg.clientHeight / 1.09}`,
        scrub: true,
      },
    });
  }, []);

  return (
    <div>
      <Navbar />
      <Header />
      <AboutMe />
      <Projects />
      <Contact />

      {/* <svg ref={svgRef} className="olk squiggle" width="2150" height="10942" viewBox="0 0 2150 10942" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path ref={pathRef} d="M12.5 48C25.8357 -57.0001 536.097 231.323 341.664 466.5C147.231 701.677 111.5 955 162 1112C212.5 1269 397.5 1533.5 701.5 1545.5C1005.5 1557.5 940.638 1828.31 282.5 2238.5C-348.849 2711.05 566.155 2607.44 817.723 2929.65C817.909 2929.88 818.088 2930.08 818.314 2930.28C887.974 2991.55 1279.62 3050.65 1884.5 3289C2490.29 3527.71 -684.759 3675.2 282.5 3905.5C1249.76 4135.8 1505.55 4362.3 818 4885.5C130.45 5408.69 1215.03 4899.25 1710.5 4644.5C2205.97 4389.75 2143.5 5509.5 1806 5338C1468.5 5166.5 345.095 6872.51 261.5 6027C177.904 5181.48 1222.8 6427.8 1652 6608C2510.85 7051.16 836.5 7044 605.5 7104.5C374.5 7165 131.762 7245.76 191 7372C250.237 7498.23 1210.66 8173.52 1212 7766.5C1213.34 7359.48 1528.5 7970 1871 7989C2213.5 8008 1985.42 8066.67 1914 8227C1842.58 8387.33 1693.56 8450 1677 8712.99C1660.44 8975.98 713.5 8712.99 494.5 8810.5C275.5 8908.01 64.5 8977.5 165 9254.5C265.5 9531.5 1284.91 9283.6 1046 9488.99C807.087 9694.38 1543 9530.48 1677 9825.49C1811 10120.5 913.5 9699.5 1067 9899.99C1211.49 10088.7 1065.35 10631 1047.7 10694C1046.82 10697.1 1043.28 10698.4 1040.47 10696.8L890.962 10609.5C886.92 10607.1 882.141 10611.1 883.744 10615.5L992.386 10913.6C993.293 10916.1 995.979 10917.4 998.515 10916.7L1289.55 10829.7C1293.94 10828.4 1294.47 10822.4 1290.33 10820.5C1258.61 10805.4 1171.42 10764.2 1145.89 10753.9C1143.24 10752.8 1141.91 10749.7 1142.95 10747C1276.01 10408.4 1347.5 10353.9 1244.5 10127.5C1141 9899.99 1870.73 10395.5 2148.5 10803.5" stroke="#CE4242" strokeWidth="50"/>
      </svg> */}

      <svg ref={svgRef} className="olk squiggle" width="2150" height="16910" viewBox="0 0 2150 16910" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path ref={pathRef} d="M0 48.6741C13.4169 -63.1596 526.783 243.928 331.167 494.411C135.55 744.893 99.6022 1014.7 150.409 1181.92C201.217 1349.14 387.342 1630.85 693.191 1643.63C999.041 1656.41 933.784 1944.86 271.642 2381.74C-363.781 2885.23 871.5 2814.5 810.4 3118.24C749.3 3421.98 1631 3174 1883.39 3500.6C2135.78 3827.21 -701.501 3911.94 271.642 4157.23C1244.79 4402.52 1502.13 4643.76 810.4 5201C118.668 5758.25 1209.85 5215.65 1708.33 4944.32C2206.81 4672.99 2143.96 5865.62 1804.41 5682.96C1464.86 5500.3 334.618 7317.34 250.515 6416.8C166.411 5516.25 1217.66 6843.69 1649.47 7035.61C2513.54 7507.61 829.012 7499.99 596.607 7564.42C364.202 7628.86 197.109 7673.85 179.586 7849.33C162.063 8024.81 1198.92 8768.4 1206.8 8269.51C1214.67 7770.61 1743.39 8363.97 1869.81 8506.49C1996.22 8649.01 2092.13 8810.95 1913.07 8759.98C1734 8709 1691.28 8997.49 1674.63 9277.6C1657.97 9557.7 692 9311 484.932 9381.45C277.864 9451.91 52.3163 9559.32 153.428 9854.35C254.539 10149.4 1018.66 10331.2 1039.79 10104.1C1060.91 9877 1539.81 10148.3 1674.63 10462.5C1809.44 10776.7 1246.24 10330.5 1060.91 10541.8C875.591 10753.2 1039.79 11228.8 1039.79 11393.9C1039.79 11559 841.589 11597.9 775.69 11228.8C709.792 10859.8 435.011 11757.1 249.006 11751.8C63 11746.5 -298.807 12428.7 979.422 12314.2C2257.65 12199.7 2349.2 12714.1 1674.63 12507.5C1000.05 12300.8 -533.727 13004.3 253.03 12955.9C1039.79 12907.4 1328.03 12995.3 709.792 13377.6C91.5536 13760 1597.66 13500.7 1759.64 13869.7C1921.62 14238.8 966.846 14127.5 1004.57 14322.4C1042.3 14517.2 1348 14249 1407.01 14467.2C1466.01 14685.4 991.77 14558.1 1004.57 14656.3C1017.38 14754.5 1310.31 14879.1 966.846 14911.4C631.766 14942.8 368.149 15199 355.477 15211.5C355.073 15211.9 354.858 15212.3 354.614 15212.8C97.0847 15753.5 1010.58 15856.9 1163.5 15610C1316.5 15363 2244 15788.5 1864.5 15821.5C1485 15854.5 740.1 16192 1242 16157C1743.9 16122 2263.01 16370.9 800.5 16404.5C-662.011 16438.1 1686.06 16917.9 2153.5 16883" stroke="#CE4242" strokeWidth="50"/>
      </svg>

    </div>
  );
}
